{"version":3,"sources":["webpack:///./src/zenroom/keygen.lua","webpack:///./node_modules/core-js/modules/es6.string.includes.js","webpack:///./node_modules/core-js/modules/_fails-is-regexp.js","webpack:///./node_modules/core-js/modules/es7.array.includes.js","webpack:///./src/zenroom/decrypt_message.lua","webpack:///./node_modules/core-js/modules/_is-regexp.js","webpack:///./node_modules/core-js/modules/_string-context.js","webpack:///./src/views/readQR.vue?c5cc","webpack:///./src/services/sockets.js","webpack:///src/views/readQR.vue","webpack:///./src/views/readQR.vue?9a98","webpack:///./src/views/readQR.vue"],"names":["module","exports","$export","__webpack_require__","context","INCLUDES","P","F","includes","searchString","this","indexOf","arguments","length","undefined","MATCH","KEY","re","e","f","$includes","el","isObject","cof","it","isRegExp","defined","that","NAME","TypeError","String","render","_vm","_h","$createElement","_c","_self","loggedIn","staticClass","_v","_s","data","attrs","src","image","_e","response","question","request","description","status","request_status","valid","request_valid","color","secret","pictureUrl","on","click","$event","endQuestion","acceptQuestion","denyQuestion","sessionId","decode","onDecode","directives","name","rawName","value","expression","type","placeholder","domProps","change","onInputSession","input","target","composing","inputSession","disabled","getRequest","inputUsername","maxlength","pattern","pincode","login","staticRenderFns","socket","window","io","connect","process","joinRoom","room","emit","session_id","sessionStatus","INITIALIZED","GOT_PUB_KEY","GOT_ENCR_DATA","FINALIZED","readQRvue_type_script_lang_js_","onboardingRequest","result","keypair","encryptedData","decrypted","session","computed","Object","objectSpread","vuex_esm","components","QrcodeReader","vue_qrcode_reader","answer","Answer","methods","setUsername","decodedString","qPos","substring","zenroom","method","_this","Module","exec_ok","exec_error","print","text","keys","conf","script","keygen_default","a","ccall","decrypt","setDecryptedValue","decrypt_message_default","joinOnboarding","sendPublicKey","JSON","parse","public","_sendPublicKey","asyncToGenerator","regeneratorRuntime","mark","_callee","publicKey","wrap","_context","prev","next","api","sent","stop","_x","apply","handleEncrypedData","_handleEncrypedData","_callee2","_context2","encrypted","decryptedObj","image_base64","persistent_storage","_getRequest2","_callee3","_context3","_x2","_acceptQuestion","_callee4","_context4","id","username","_denyQuestion","_callee5","_context5","$router","push","_onInputSession","_callee6","_context6","_login","_callee7","_context7","mounted","_this2","$route","query","onStatus","console","log","views_readQRvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/readQR.564d12ad.js","sourcesContent":["module.exports = \"-- generate a simple keyring\\nkeyring = ECDH.new()\\nkeyring:keygen()\\n\\n-- export the keypair to json\\nexport = JSON.encode(\\n   {\\n      public  = keyring:public():base64(),\\n\\t  private = keyring:private():base64()\\n   }\\n)\\nprint(export)\\n\"","// 21.1.3.7 String.prototype.includes(searchString, position = 0)\n'use strict';\nvar $export = require('./_export');\nvar context = require('./_string-context');\nvar INCLUDES = 'includes';\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(INCLUDES), 'String', {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~context(this, searchString, INCLUDES)\n      .indexOf(searchString, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var MATCH = require('./_wks')('match');\nmodule.exports = function (KEY) {\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch (e) {\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch (f) { /* empty */ }\n  } return true;\n};\n","'use strict';\n// https://github.com/tc39/Array.prototype.includes\nvar $export = require('./_export');\nvar $includes = require('./_array-includes')(true);\n\n$export($export.P, 'Array', {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\nrequire('./_add-to-unscopables')('includes');\n","module.exports = \"data = read_json(DATA)\\nkeys = read_json(KEYS)\\n\\nheader = msgunpack(base64(data.header))\\n\\ninternal_key = ECDH.new()\\ninternal_key:private(base64(keys.private))\\n\\npayload = decrypt(internal_key, base64(header.pub_key), map(data, base64))\\n\\nprint(JSON.encode(msgunpack(payload.text)))\\n\"","// 7.2.8 IsRegExp(argument)\nvar isObject = require('./_is-object');\nvar cof = require('./_cof');\nvar MATCH = require('./_wks')('match');\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');\n};\n","// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = require('./_is-regexp');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, searchString, NAME) {\n  if (isRegExp(searchString)) throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.loggedIn)?_c('section',{staticClass:\"section\"},[_c('div',{staticClass:\"container\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"Login\")]),_c('div',[_c('div',{staticClass:\"field\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"Naam\")]),_c('div',{staticClass:\"control\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputUsername),expression:\"inputUsername\"}],staticClass:\"input\",attrs:{\"type\":\"text\",\"placeholder\":\"Je naam\"},domProps:{\"value\":(_vm.inputUsername)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.inputUsername=$event.target.value}}})])]),_c('div',{staticClass:\"field\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"Pincode\")]),_c('div',{staticClass:\"control\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.pincode),expression:\"pincode\"}],staticClass:\"input\",attrs:{\"type\":\"password\",\"maxlength\":\"4\",\"placeholder\":\"Pincode\",\"pattern\":\"[0-9]{4}\"},domProps:{\"value\":(_vm.pincode)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.pincode=$event.target.value}}})])]),_c('p',[_c('button',{staticClass:\"button is-link\",attrs:{\"disabled\":!(_vm.inputUsername && _vm.pincode.length === 4)},on:{\"click\":function($event){_vm.login()}}},[_vm._v(\"Log in\")])])])])]):(_vm.onboardingRequest)?_c('section',{staticClass:\"section\"},[_c('div',{staticClass:\"container\"},[_c('div',[(_vm.data)?_c('div',[_c('pre',[_vm._v(_vm._s(_vm.data[0]))]),_c('img',{attrs:{\"src\":'data:image/jpeg;base64,'+_vm.image}})]):_vm._e()])])]):(_vm.request)?_c('section',{staticClass:\"section\"},[_c('div',{staticClass:\"container\"},[(!_vm.response)?_c('div',[_c('h1',{staticClass:\"title\"},[_vm._v(\"Beantwoord vraag\")]),_c('h2',{staticClass:\"subtitle\"},[_vm._v(\"\\n                    \"+_vm._s(_vm.request.description)+\"\\n                \")]),_c('div',[_c('button',{staticClass:\"button is-link\",on:{\"click\":function($event){_vm.acceptQuestion()}}},[_vm._v(\"OK\")]),_vm._v(\"\\n                    Â \\n                    \"),_c('button',{staticClass:\"button is-danger\",on:{\"click\":function($event){_vm.denyQuestion()}}},[_vm._v(\"Weiger\")])]),_c('h2',{staticClass:\"subtitle\"},[_vm._v(\"\\n                    \"+_vm._s(_vm.sessionId)+\"\\n                \")])]):(_vm.response.response.data)?_c('div',{staticClass:\"has-text-centered\"},[_c('answer',{attrs:{\"question\":_vm.request.description,\"status\":_vm.response.response.data.request_status,\"valid\":_vm.response.response.data.request_valid,\"color\":_vm.response.response.data.secret,\"pictureUrl\":_vm.pictureUrl}}),_c('br'),_c('p',[_c('button',{staticClass:\"button\",on:{\"click\":function($event){_vm.endQuestion()}}},[_vm._v(\"OK\")])])],1):_vm._e()])]):_c('section',{staticClass:\"section\"},[_c('div',{staticClass:\"container\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"Scan QR Code\")]),_c('div',[_c('h2',{staticClass:\"subtitle\"},[_vm._v(\"\\n                    Scan de QR code om de identiteitsvraag te lezen\\n                \")]),_c('div',[_c('qrcode-reader',{on:{\"decode\":_vm.onDecode}})],1)]),_c('div',{staticClass:\"field\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"Session ID manual input\")]),_c('div',{staticClass:\"control\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputSession),expression:\"inputSession\"}],staticClass:\"input\",attrs:{\"type\":\"text\",\"placeholder\":\"Session code\"},domProps:{\"value\":(_vm.inputSession)},on:{\"change\":_vm.onInputSession,\"input\":function($event){if($event.target.composing){ return; }_vm.inputSession=$event.target.value}}})]),_c('p',[_c('button',{staticClass:\"button is-link\",attrs:{\"disabled\":!_vm.inputSession},on:{\"click\":function($event){_vm.getRequest(_vm.sessionId)}}},[_vm._v(\"Get Request\")])])])])]),(_vm.debug)?_c('div',[_c('pre',[_vm._v(_vm._s(_vm.sessionId))]),_c('pre',[_vm._v(_vm._s(_vm.request))]),_c('pre',[_vm._v(_vm._s(_vm.response))])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const socket = window.io.connect(process.env.VUE_APP_API);\n\nexport function joinRoom(room) {\n  socket.emit(\"join_room\", {\n    session_id: room\n  });\n}\n\nexport const sessionStatus = {\n  INITIALIZED: \"INITIALIZED\",\n  GOT_PUB_KEY: \"GOT_PUB_KEY\",\n  GOT_ENCR_DATA: \"GOT_ENCR_DATA\",\n  FINALIZED: \"FINALIZED\"\n};\n","<template>\n    <div>\n        <section class=\"section\" v-if=\"!loggedIn\">\n            <div class=\"container\">\n                <h1 class=\"title\">Login</h1>\n                <div>\n                    <div class=\"field\">\n                        <label class=\"label\">Naam</label>\n                        <div class=\"control\">\n                            <input class=\"input\" type=\"text\" placeholder=\"Je naam\"\n                                   v-model=\"inputUsername\">\n                        </div>\n                    </div>\n                    <div class=\"field\">\n                        <label class=\"label\">Pincode</label>\n                        <div class=\"control\">\n                            <input class=\"input\" type=\"password\" maxlength=\"4\" placeholder=\"Pincode\" pattern=\"[0-9]{4}\"\n                                   v-model=\"pincode\">\n                        </div>\n                    </div>\n                    <p>\n                        <button class=\"button is-link\" @click=\"login()\" :disabled=\"!(inputUsername && pincode.length === 4)\">Log in</button>\n                    </p>\n                </div>\n            </div>\n        </section>\n\n        <section class=\"section\" v-else-if=\"onboardingRequest\">\n            <div class=\"container\">\n                <!-- <div>\n                    <h1 class=\"title\">Join onboarding?</h1>\n                    <button class=\"button is-link\" @click=\"joinOnboarding()\">YES!</button>\n                </div>\n                <br/>\n                <div v-if=\"result\">\n                    <h2 class=\"subtitle\">Public key attached to session</h2>\n                </div>\n                <br/> -->\n                <div>\n                    <div v-if=\"data\">\n                      <pre>{{data[0]}}</pre>\n                      <img v-bind:src=\"'data:image/jpeg;base64,'+image\" />\n                    </div>\n                </div>\n            </div>\n        </section>\n\n        <section class=\"section\" v-else-if=\"request\">\n            <div class=\"container\">\n                <div v-if=\"!response\">\n                    <h1 class=\"title\">Beantwoord vraag</h1>\n\n                    <h2 class=\"subtitle\">\n                        {{request.description}}\n                    </h2>\n                    <div>\n                        <button class=\"button is-link\" @click=\"acceptQuestion()\">OK</button>\n                        &nbsp;\n                        <button class=\"button is-danger\" @click=\"denyQuestion()\">Weiger</button>\n                    </div>\n                    <h2 class=\"subtitle\">\n                        {{sessionId}}\n                    </h2>\n                </div>\n\n                <div v-else-if=\"response.response.data\" class=\"has-text-centered\">\n                    <answer :question=\"request.description\"\n                            :status=\"response.response.data.request_status\"\n                            :valid=\"response.response.data.request_valid\"\n                            :color=\"response.response.data.secret\"\n                            :pictureUrl=\"pictureUrl\">\n                    </answer>\n                    <br>\n                    <p>\n                        <button class=\"button\" @click=\"endQuestion()\">OK</button>\n                    </p>\n\n                </div>\n\n                </div>\n        </section>\n\n        <section class=\"section\" v-else>\n            <div class=\"container\">\n                <h1 class=\"title\">Scan QR Code</h1>\n                <div>\n                    <h2 class=\"subtitle\">\n                        Scan de QR code om de identiteitsvraag te lezen\n                    </h2>\n\n                    <!-- <div class=\"card\">\n                        <div class=\"card-content\">\n                        <div class=\"content\">\n                            Tijdelijk kan QR code alleen worden gescant met je eigen camera functie of overige QR code scanner.\n                        </div>\n                        <div class=\"content\">\n                            Groetjes, <br/> De developers\n                        </div>\n\n                        </div>\n                    </div> -->\n\n                    <div>\n                        <qrcode-reader @decode=\"onDecode\"></qrcode-reader>\n                        <!-- <br/> -->\n                    </div>\n                </div>\n                <div class=\"field\">\n                    <label class=\"label\">Session ID manual input</label>\n                    <div class=\"control\">\n                        <input class=\"input\" type=\"text\" placeholder=\"Session code\"\n                               v-model=\"inputSession\" @change=\"onInputSession\">\n                    </div>\n                    <p>\n                        <button class=\"button is-link\" @click=\"getRequest(sessionId)\" :disabled=\"!inputSession\">Get Request</button>\n                    </p>\n                </div>\n            </div>\n        </section>\n\n        <div v-if=\"debug\">\n            <pre>{{sessionId}}</pre>\n            <pre>{{request}}</pre>\n            <pre>{{response}}</pre>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from \"vuex\";\nimport { QrcodeReader } from \"vue-qrcode-reader\";\nimport { socket, joinRoom, sessionStatus } from \"../services/sockets\";\nimport { setItem } from \"../services/persistent_storage\";\nimport {\n  getRequest,\n  acceptRequest,\n  denyRequest,\n  getPictureUrl,\n  attachPublicKey\n} from \"../api\";\nimport Answer from \"../components/Answer\";\n// Zenroom\nimport _keygen from \"raw-loader!../zenroom/keygen.lua\";\nimport _decrypt from \"raw-loader!../zenroom/decrypt_message.lua\";\n\nexport default {\n  data() {\n    return {\n      sessionId: null,\n      request: null,\n      onboardingRequest: null,\n      response: null,\n      inputSession: \"\",\n      inputUsername: \"aj.jansen\",\n      pincode: \"1234\",\n      pictureUrl: null,\n      loggedIn: false,\n      result: null,\n      keypair: null,\n      encryptedData: null,\n      decrypted: null,\n      session: null,\n      data: null,\n      image: null\n    };\n  },\n  computed: {\n    ...mapGetters([\"username\", \"debug\"])\n  },\n  components: {\n    QrcodeReader,\n    answer: Answer\n  },\n  methods: {\n    ...mapActions({\n      setUsername: \"setUsername\"\n    }),\n    onDecode(decodedString) {\n      // QR code scan result\n      if (decodedString) {\n        if (decodedString.includes(\"http\")) {\n          let qPos = decodedString.indexOf(\"?\");\n          this.sessionId = decodedString.substring(\n            qPos + \"?session=\".length,\n            decodedString.length\n          );\n        } else {\n          this.sessionId = decodedString;\n        }\n\n        this.getRequest(this.sessionId);\n      }\n    },\n    zenroom(method) {\n      window.Module = {\n        ...window.Module,\n        exec_ok: () => (this.result += \" OK\"),\n        exec_error: () => (this.result += \" ERROR\")\n      };\n\n      const keypair = () => {\n        window.Module.print = text => (this.keypair = text);\n\n        const keys = null;\n        const data = null;\n        const conf = null;\n        const script = _keygen;\n\n        window.Module.ccall(\n          \"zenroom_exec\",\n          \"number\",\n          [\"string\", \"string\", \"string\", \"string\", \"number\"],\n          [script, conf, keys, data, 1]\n        );\n      };\n\n      const decrypt = () => {\n        window.Module.print = text => this.setDecryptedValue(text);\n\n        const keys = this.keypair;\n        const data = this.encryptedData;\n        const conf = null;\n        const script = _decrypt;\n\n        window.Module.ccall(\n          \"zenroom_exec\",\n          \"number\",\n          [\"string\", \"string\", \"string\", \"string\", \"number\"],\n          [script, conf, keys, data, 1]\n        );\n      };\n\n      if (method === \"keypair\") {\n        keypair();\n      } else if (method === \"decrypt\") {\n        decrypt();\n      }\n    },\n    joinOnboarding() {\n      this.zenroom(\"keypair\");\n      this.result = this.keypair;\n      // this.keypair = JSON.parse(this.keypair);\n      this.sendPublicKey(JSON.parse(this.keypair).public);\n    },\n    async sendPublicKey(publicKey) {\n      this.response = await attachPublicKey(publicKey, this.sessionId);\n      this.result = this.response;\n    },\n    async handleEncrypedData() {\n      this.session = await getRequest(this.sessionId);\n      this.encryptedData = this.session.response.data.encrypted;\n      this.zenroom(\"decrypt\");\n    },\n    setDecryptedValue(value) {\n      this.decrypted = value;\n      var decryptedObj = JSON.parse(this.decrypted);\n      this.data = JSON.parse(decryptedObj.data);\n      this.image = this.data[1].image_base64;\n\n      setItem(\"personal_data\", this.data[0]);\n      setItem(\"personal_photo\", this.image);\n    },\n    async getRequest(sessionId) {\n      this.request = await getRequest(sessionId);\n      if (this.request.response.request === \"onboarding\") {\n        this.onboardingRequest = this.request.response;\n        joinRoom(this.sessionId);\n        this.joinOnboarding();\n      } else {\n        this.request = this.request.response;\n      }\n    },\n    async acceptQuestion() {\n      this.response = await acceptRequest(this.request.id, this.username);\n    },\n    async denyQuestion() {\n      this.response = await denyRequest(this.request.id);\n    },\n    endQuestion() {\n      this.$router.push(\"/\");\n    },\n    async onInputSession() {\n      // Manual session input\n      if (this.inputSession.includes(\"http\")) {\n        let qPos = this.inputSession.indexOf(\"?\");\n        this.sessionId = this.inputSession.substring(\n          qPos + \"?session=\".length,\n          this.inputSession.length\n        );\n      } else {\n        this.sessionId = this.inputSession;\n      }\n      this.result = this.sessionId;\n      this.getRequest(this.sessionId);\n    },\n    async login() {\n      // Simple login\n      if (this.inputUsername && this.pincode) {\n        this.loggedIn = true;\n        this.setUsername(this.inputUsername);\n        // this.pictureUrl = await getPictureUrl(this.inputUsername);\n        // this.pictureUrl = this.pictureUrl.response;\n      }\n    }\n  },\n  mounted() {\n    this.loggedIn = !!this.username;\n    this.sessionId = this.$route.query.session;\n\n    if (this.sessionId) {\n      this.getRequest(this.sessionId);\n    }\n\n    const onStatus = data => console.log(data);\n    socket.on(\"status_update\", data => {\n      onStatus(data);\n      if (data.status == sessionStatus.GOT_ENCR_DATA) {\n        this.handleEncrypedData();\n      }\n    });\n    console.log(\"API URL: \" + process.env.VUE_APP_API);\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./readQR.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./readQR.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./readQR.vue?vue&type=template&id=405c5a99&\"\nimport script from \"./readQR.vue?vue&type=script&lang=js&\"\nexport * from \"./readQR.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"readQR.vue\"\nexport default component.exports"],"sourceRoot":""}